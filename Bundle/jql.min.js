var xt=await fetch("../src/Resource/defaultTagPermissions.json").then(t=>t.json()),D={isAllowed(t){let e=t?.nodeName.toLowerCase()||"none";return!!xt[e]},setTagPermission(t,e=!1){t=t.toLowerCase(),rawTags[t]&&(rawTags[t]=e)}};var tt=await fetch("../src/Resource/attributeStore.json").then(t=>t.json()),Mt=!1;var W={data:/data-[\-\w.\p{L}]/ui,validURL:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whiteSpace:/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,notAllowedValues:/javascript|injected|noreferrer|alert|DataURL/gi},Tt=t=>{if(Mt&&Object.keys(t.removed).length){let e=Object.entries(t.removed).reduce((n,[o,r])=>[...n,`${o} => ${r}`],[]).join("\\000A");console.info("JQL HTML creation errors:"),console.info(e)}},et=t=>{let e=document.createElement("template"),n={rawHTML:t.outerHTML,removed:{}};e.innerHTML=`<div id="placeholder">${t.outerHTML}</div>`;let o=e.content.querySelector("#placeholder");return o.querySelectorAll("*").forEach(r=>{let i=l(r,SVGElement)?tt.svg:tt.html;[...r.attributes].forEach(c=>{let m=c.name.trim().toLowerCase(),p=c.value.trim().toLowerCase().replace(W.whiteSpace,""),$=m==="href"?!W.validURL.test(p):W.notAllowedValues.test(p),y=m.startsWith("data")?!W.data.test(m):!!i[m];($||y)&&(n.removed[`${c.name}`]=`attribute/property (-value) not allowed, remove (value: ${P(c.value||"none",60)})`,r.removeAttribute(c.name))}),D.isAllowed(r)||(n.removed[`<${r.nodeName.toLowerCase()}>`]=`not allowed, not rendered (tag: ${P(r.outerHTML,60)})`,r.remove())}),Tt(n),o.children[0]};var At=D.setTagPermission;var S={BeforeBegin:"beforebegin",AfterBegin:"afterbegin",BeforeEnd:"beforeend",AfterEnd:"afterend"},Ht=t=>{let e=Object.assign(document.createElement("div"),{id:"placeholder",innerHTML:t.trim()});return e.childNodes.length?et(e):void 0},_=(t,e=document.body,n=S.BeforeEnd)=>{if(e=e.isJQL?e.first():e,t){if(l(t,HTMLElement))return e.insertAdjacentElement(n,t);l(t,Comment,Text)&&(n===S.BeforeEnd&&e.appendChild(t),n===S.AfterBegin&&e.insertBefore(t,e.firstElementChild))}},v=t=>{t=t.trim();let e=Ht(t);return t.startsWith("<!--")&&t.endsWith("-->")?document.createComment(t.replace(/<!--|-->$/g,"")):e.children.length?e.children[0]:v(`<span data-jqlcreationerror="1">${j(t,60)}</span>`)};var nt=t=>t&&(t.textContent=""),U=(t,e)=>t.toLowerCase().trim()===e,z=(t,e)=>{t&&l(e,Object)&&Object.entries(e).forEach(([n,o])=>t.dataset[n]=o)},ot=(t,e,n)=>{let{setStyle:o}=b;n&&l(e,String)&&(e={[e]:n==="-"?"":n});let r;e.className&&(r=e.className,delete e.className),r=[...t.classList].find(u=>u.startsWith("JQLCreated")||r&&u===r)||r||`JQLCreated_${Z.randomHtmlElementId(12)}`,o(`.${r}`,e),t.classList.add(r)},rt=(t,e)=>{t&&Object.entries(e).forEach(([n,o])=>{n.startsWith("data")&&z(t,{[n]:o}),U(n,"class")&&o.split(/\s+/).forEach(r=>t.classList.add(`${r}`)),l(o,String)&&(t[n]=o)})},wt={straigthLoops:{toggleClass:(t,e)=>t.classList.toggle(e),toggleStyleFragments:(t,e)=>t&&Object.entries(e).forEach(([n,o])=>{l(o,Function)&&(o=o(t)),/color/i.test(n)&&(o=o.startsWith("#")?st(o):o.replace(/(,|,\s{2,})(\w)/g,(...r)=>`, ${r[2]}`)),t.style[n]=`${t.style[n]}`==`${o}`?"":o}),removeAttr:(t,e)=>t&&t.removeAttribute(e),toggleAttr:(t,e,n)=>t&&t.hasAttribute(e)?t.removeAttribute(e):t.setAttribute(e,n),empty:nt,clear:nt,replaceClass:(t,e,...n)=>{t.classList.remove(e),n.forEach(o=>t.classList.add(o))},removeClass:(t,...e)=>e.forEach(n=>t.classList.remove(n)),addClass:(t,...e)=>t&&e.forEach(n=>t.classList.add(n)),show:t=>t.style.display="",hide:t=>t.style.display="none",setData:z,assignAttrValues:rt,attr(t,e,n){if(!t)return!0;if(n!==void 0&&(e={[e]:n}),!n&&l(e,String))return t.getAttribute(e);Object.entries(e).forEach(([o,r])=>U(o,"style")?ot(t,r,void 0):U(o,"data")?z(t,r):l(r,Object)?rt(t,r):t.setAttribute(o,r))},style:(t,e,n)=>{n&&l(e,String)&&(e={[e]:n||"none"}),l(e,Object)&&Object.entries(e).forEach(([o,r])=>t.style[o]=r)},css:ot},instanceExtensions:{text:(t,e,n)=>{if(t.isEmpty())return t;let o=r=>r.textContent=n?r.textContent+e:e;return e?T(t,o):t.first().textContent},each:(t,e)=>T(t,e),remove:(t,e)=>{let n=o=>o.remove();if(e){let o=t.find$(e);!o.isEmpty()&&T(o,n);return}T(t,n)},computedStyle:(t,e)=>t.first()&&getComputedStyle(t.first())[e],getData:(t,e,n)=>t.first()&&t.first().dataset&&t.first().dataset[e]||n,isEmpty:t=>t.collection.length<1,is:(t,e)=>{let n=t.first();if(!n)return!0;switch(e){case":visible":return O(n);case":hidden":return!O(n);case":disabled":return n.getAttribute("readonly")||n.getAttribute("disabled");default:return!0}},hasClass:(t,...e)=>{let n=t.first();return t.isEmpty()||!n.classList.length?!1:e.find(o=>n.classList.contains(o))||!1},replace:(t,e,n)=>{let o=t.first();return n.isJQL&&(n=n.first()),o&&e&&(e=l(e,String)?o.querySelector(e):e.isJQL?e.first():e,e&&n&&e.replaceWith(n)),t},replaceMe:(t,e)=>(e=l(e,HTMLElement)?b(e):e,t.parent().replace(t,e),e),val:(t,e)=>{let n=t.first();return!n||!l(n,HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement)?t:e===void 0?n.value:(n.value=`${e}`.length<1?"":e,t)},parent:t=>t.collection.length&&t.first().parentNode&&b(t.first().parentNode)||t,append:(t,...e)=>{if(t.collection.length&&e.length)for(let n=0;n<e.length;n+=1){let o=e[n];if(l(o,String))return t.collection.forEach(r=>r.appendChild(v(o))),t;if(N(e[n]))return t.collection.forEach(r=>r.appendChild(is(o,Comment)?o:o.cloneNode(!0))),t;if(e[n].isJQL&&e[n].collection.length){e[n].isVirtual&&o.toDOM();let r=o.collection;o.remove(),r.forEach(i=>t.collection.forEach(u=>u.appendChild(l(i,Comment)?i:i.cloneNode(!0))))}}return t},prepend:(t,...e)=>{if(!t.isEmpty()&&e)for(let n=0;n<e.length;n+=1){let o=e[n];if(l(o,String))return t.collection.forEach(r=>r.insertBefore(v(o),r.firstChild)),t;if(N(o))return t.collection.forEach(r=>r.insertBefore(l(o,Comment)?o:o.cloneNode(!0),r.firstChild)),t;if(o.isJQL&&!o.isEmpty()){let r=o.collection.slice();o.remove(),r.forEach(i=>t.collection.forEach(u=>u&&u.insertBefore(l(i,Comment)?i:i.cloneNode(!0),u.firstChild)))}}return t},appendTo:(t,e)=>(e.isJQL||(e=t.virtual(e)),e.append(t)),prependTo:(t,e)=>(e.isJQL||(e=t.virtual(e)),e.prepend(t)),single:(t,e="0")=>t.collection.length>0?isNaN(+e)&&t.find(e)?t.find$(e):+e<t.collection.length?b(t.collection[e]):b(t.collection.slice(-1)):t,toNodeList:t=>{let e=document.createElement("div");for(let n of t.collection){let o=document.importNode(n,!0);o.removeAttribute("id"),e.append(o)}return e.childNodes},duplicate:(t,e=!1)=>{let n=t.toNodeList();return e?b(n):t.virtual(n)},toDOM:(t,e=document.body,n=S.BeforeEnd)=>(t.isVirtual&&(t.isVirtual=!1,B(t.collection,e,n)),t),first:(t,e=!1)=>{if(t.collection.length>0)return e?t.single():t.collection[0]},first$:(t,e)=>t.single(e),find:(t,e)=>t.first()?.querySelectorAll(e)||[],find$:(t,e)=>{let n=t.collection.reduce((o,r)=>[...o,[...r.querySelectorAll(e)]],[]).flat().filter(o=>l(o,HTMLElement));return n.length&&b(n[0])||b()},prop:(t,e,n)=>n?t.collection.length?T(t,o=>o[e]=n):t:t.collection.length?t.first()[e]:t,on:(t,e,n)=>{if(t.collection.length){let o=it(t);b.handle(t,e,o,n)}return t},html:(t,e,n)=>{if(e===void 0)return t.first()?.innerHTML;if(!t.isEmpty()){let o=e.isJQL?e.first():v(`<div>${e}</div>`);if(!l(o,Comment))return T(t,i=>i.innerHTML=n?i.innerHTML+o.innerHTML:o.innerHTML)}return t},outerHtml:t=>(t.first()||{outerHTML:void 0}).outerHTML,htmlFor:(t,e,n="",o=!1)=>{if(e&&t.collection.length){let r=t.find$(e);if(!r)return t;if("{htmlValue}".trim().length<1)return r.textContent="",t;let i=v(`<div>${n}</div>`);i&&r.html(i.innerHTML,o)}return t},dimensions:t=>t.first()?.getBoundingClientRect(),delegate:(t,e,n,...o)=>(o.forEach(r=>b.handle(t,e,n,r)),t),ON:(t,e,...n)=>(t.collection.length&&n.forEach(o=>t.on(e,o)),t),trigger:(t,e,n=Event,o={})=>{if(t.collection.length){let r=new n(e,{...o,bubbles:o.bubbles??!0});for(let i of t.collection)i.dispatchEvent(r)}return t}}},G=wt;var Y=await fetch("../src/Resource/defaultLogStyling.txt").then(t=>t.text()).then(t=>t.split("~RULE~")),ct={get isOn(){return F},isVisible:()=>O(M()),on(){F=!0,q||(M()||dt())?.parentNode.classList.add("visible"),w(`Logging started (to ${q?"console":"document"})`)},off(){M()&&(w("Logging stopped"),M()?.parentNode.classList.remove("visible")),F=!1},toConsole(t=!1){q=t,F=t,t&&document.querySelector("#logBox")?.remove()},remove:()=>{F=!1,document.querySelector("#logBox").remove()},hide:()=>M()?.parentNode.classList.remove("visible"),show:()=>M()?.parentNode.classList.add("visible"),reversed(t=!0){lt=t,w(`Reverse logging reset: now logging ${t?"bottom to top (latest first)":"top to bottom (latest last)"}`)},clear(){let t=M();t&&(t.textContent=""),w("Cleared")}},at=!1,F=!1,q=!1,lt=!0,M=()=>document.querySelector("#jql_logger"),Rt=!0,dt=()=>{Y&&Nt(b.createStyle("JQLLogCSS"));let t=Rt?"div":"pre",e=`<div id="logBox"><div class="legend"><div></div></div><${t} id="jql_logger"></${t}></div>`;return _(v(e),void 0,S.AfterBegin),document.querySelector("#jql_logger")},jt=t=>l(t,String)&&Object.assign(document.createElement("textarea"),{innerHTML:t}).textContent||t,w=(...t)=>{if(!F)return;!q&&!M()&&dt();let e=n=>`${l(n,Object)?JSON.stringify(n,null,2):n}
`;t.forEach(n=>q?console.log(jt(n)):M().insertAdjacentHTML(lt?"afterbegin":"beforeend",`${mt()} ${e(n.replace(/\n/g,"<br>"))}`))},ut=t=>at=t,Q=(...t)=>at&&w(...t);function Nt(t){Y?.forEach(e=>t(e)),Y=void 0}var gt=Ft,ft=await fetch("../src/Resource/defaultPopupStyling.txt").then(t=>t.text()).then(t=>t.split("~RULE~"));function Ft(t){let e=t(document.body),n=t.createStyle("JQLPopupCSS");It(n);let o,r,i="ontouchstart"in document.documentElement?"touchend":"click";t.delegate(i,"#closer, .between",L);let u=()=>(C(),E.hasClass("active")&&E.removeClass("active"),E.addClass("active"),o=setTimeout(()=>E.removeClass("active"),2500),!0),c=(()=>{let s=!1;return{set isModal(d){s=d},get isModal(){return s},get isModalActive(){return s&&p.hasClass("active")&&u()}}})(),m=s=>{let d=t('<div class="popupContainer">').append(t('<span id="closer" class="closeHandleIcon"></span>').prop("title","Click here or anywhere outside the box to close")).append('<div class="popupBox"><div id="modalWarning"></div><div data-modalcontent></div></div>'),g=t("#closer"),H=t('<div class="between"></div>');return[d,H,g,t("#modalWarning")]},[p,$,y,E]=m(),x=()=>{t(".between").removeClass("active").style({top:0}),t("#closer, .popupContainer, #modalWarning").removeClass("active"),t("[data-modalcontent]").empty()},J=(s,d)=>{t(".between, .popupContainer").addClass("active"),p.style({height:"auto",width:"auto"}),$.style({top:`${scrollY}px`}),e.addClass("popupActive"),d&&d.addClass("active")},C=()=>o&&clearTimeout(o),A=(s,d,g)=>{if(c.isModal=d,r=g,!s.isJQL&&!l(s,String))return h(t('<b style="color:red">Popup not created: invalid input</b>'),2);C(),t(".popupBox > [data-modalcontent]").empty().append(s.isJQL?s:t(`<div>${s}</div>`)),J(p,c.isModal?void 0:y)},f=(s,d=!1,g=void 0)=>!c.isModalActive&&A(s,d,g),h=(s,d=2,g=null)=>{if(c.isModalActive)return;x(),f(s,!1,g),o=setTimeout(g?()=>L(g):L,d*1e3)};function L(s){if(C(),c.isModalActive)return;let d=l(s,Function)?s:r;if(l(d,Function))return r=void 0,d();x();let g=parseFloat(p.computedStyle("transitionDuration"))*1e3;o=setTimeout(()=>e.removeClass("popupActive"),g)}return{create:f,createTimed:h,remove:L,removeModal:s=>{c.isModal=!1,L(s)}}}function It(t){ft.forEach(e=>t(e)),ft=void 0}var R={},pt=t=>{let e=r=>R[r.type].forEach(i=>i(r)),n=(r,i)=>u=>{let c=u.target.closest(r);return c&&i(u,t(c))},o=r=>!Object.keys(R).find(i=>i===r)&&document.addEventListener(r,e);return(r,i,u,c)=>{o(i);let m=u?n(u,c):c;R=R[i]?{...R,[i]:R[i].concat(m)}:{...R,[i]:[m]}}};var X=Jt;function Jt({styleSheet:t,createWithId:e}){let{cssRuleFromText:n,checkAtRules:o,toDashedNotation:r,IS:i,shortenRule:u,consider:c,ruleExists:m,checkParams:p,atMedia2String:$,sheet:y}=Ot({styleSheet:t,createWithId:e}),E=(f,h)=>Object.entries(h).forEach(([L,a])=>f.style.setProperty(r(L),a)),x=(f,h,L=y)=>{if(!i(f,String)||!f.trim().length||/[;,]$/g.test(f.trim()))return console.error(`StylingFactory instance (setRules): [${f||"[no selector given]"}] is not a valid selector`);let a=m(f,!0),s=a||L.cssRules[L.insertRule(`${f} {}`,L.cssRules.length||0)];return c(()=>E(s,h),f,a)},J=f=>{let h=f.trim().split(/{/,2),L=h.shift().trim();if(!i(L,String)||!L.trim())return console.error(`StylingFactory instance (doParse): no (valid) selector could be extracted from rule ${u(f)}`);let a=n(h);return x(L,a)},C=f=>{let h=o(f);return h.done?h.existing:J(f)},A=(f,h)=>f.trim().startsWith("@media")?C($(f,h)):x(f,h);return(f,h={})=>p(f,h)&&(Object.keys(h).length?A(f,h):C(f))}function Ot({styleSheet:t,createWithId:e}){let n="Note: The rule or some of its properties may not be supported by your browser (yet)",o=a=>a.replace(/([*\[\]()-+{}.$?\\])/g,"\\$1");t=e?(a=>document.head.insertAdjacentElement("beforeend",Object.assign(document.createElement("style"),{id:a,type:"text/css"})).sheet)(e):t;let i=(a,...s)=>{let d=s.length&&Array.isArray(s.slice(-1))?s.pop().join(""):"";return new RegExp((s.length&&a.raw.reduce((g,H,$t)=>g.concat(s[$t-1]||"").concat(H),"")||a.raw.join("")).split(`
`).map(g=>g.replace(/\s|\/\/.*$/g,"").trim().replace(/(@s!)/g," ")).join(""),d)},u=(a,s)=>[...t.rules].find(d=>s?x(d.selectorText||"",a):i`${o(a)}${[..."gim"]}`.test(d.cssText)),c=a=>/@import|@charset|@font-face/i.test(a)?{existing:A(a,0),done:!0}:$.test(a)?{ok:A(a,t.cssRules.length),done:!0}:{ok:!1,done:!1},m=(a,...s)=>!!s.find(d=>p(a,d)),p=(a,...s)=>{if(s.length>1)return m(a,...s);s=s.shift();let d="Invalid parameter(s)",g=a===0?Number:a===""?String:a?Object.getPrototypeOf(a)?.constructor:{name:d};return s?s===g?.__proto__||s===g:g?.name??d},$=i`@keyframes | @font-feature-values | @font-palette-values 
    | @layer | @namespace | @page | @counter-style | @container | @media ${["i"]}`,y=a=>a[0].trim().replace(/[}{]/,"").split(`
`).map(s=>s.trim()).filter(s=>s).reduce((s,d)=>{let[g,H]=[d.slice(0,d.indexOf(":")).trim(),d.slice(d.indexOf(":")+1).trim().replace(/;$|;.+(?=\/*).+\/$/,"")];return g&&H?{...s,[g]:H}:s},{}),E=a=>a.replace(/[A-Z]/g,s=>`-${s.toLowerCase()}`).replace(/[^--]^-|-$/,""),x=(a,s)=>a?.replace("::",":")===s?.replace("::",":"),J=(a,s)=>a&&p(a,String)&&a.trim().length&&p(s,Object)||(console.error("StylingFactory instance called with invalid parameters"),!1),C=a=>{let s=(a||"NO RULE").trim().slice(0,50).replace(/\n/g,"\\n").replace(/\s{2,}/g," ");return a.length>s.length?`${s.trim()}...truncated`:s},A=a=>{a=a.trim();let s=!!u(a.slice(0,a.indexOf("{")));try{return t.insertRule(`${a}`,t.cssRules.length),s}catch(d){return console.error(`StylingFactory instance (tryParse) ${d.name} Error:
${d.message}
Rule: ${C(a)}
${n}`),s}},f=(a,s,d)=>{try{return a(),d}catch(g){return console.error(`StylingFactory instance (tryAddOrModify) ${g.name} Error:
${g.message}
Rule: ${C(s)}
${n}`),d}},h=a=>Object.entries(a).map(([s,d])=>`${s}: ${d.trim()}`).join(`;
`);return{sheet:t,cssRuleFromText:y,checkAtRules:c,ruleExists:u,atMedia2String:(a,s)=>`${a.trim()} ${Object.entries(s).map(([d,g])=>`${d}: { ${h(g)}`)}`,toDashedNotation:E,checkParams:J,tryParse:A,consider:f,IS:p,shortenRule:C}}var ht=G.instanceExtensions,Lt=G.straigthLoops,V=(t,e=2)=>`${t}`.padStart(e,"0"),qt=(t,...e)=>!!e.find(n=>l(t,n)),l=(t,...e)=>{if(e.length>1)return qt(t,...e);e=e.shift();let n="Invalid parameter(s)",o=t===0?Number:t===""?String:t?Object.getPrototypeOf(t)?.constructor:{name:n};return e?e===o?.__proto__||e===o:o?.name??n},yt=t=>l(t,Comment,Text),N=t=>l(t,Text,HTMLElement,Comment),K=t=>l(t,String)&&/^<|>$/.test(`${t}`.trim()),Et=t=>Array.isArray(t)&&!t?.find(e=>!K(e)),k=t=>Array.isArray(t)&&!t?.find(e=>!N(e)),St=t=>t?.filter(e=>e).reduce((e,n)=>e.concat(yt(n)?n.textContent:n.outerHTML),""),bt=t=>t?l(t,NodeList)?[...t]:N(t)?[t]:k(t)?t:t.isJQL?t.collection:void 0:[],vt=(t,e,n)=>{let o=e!==document.body&&l(t,String)&&t.toLowerCase()!=="body"?e:document,r;try{n.collection=[...o.querySelectorAll(t)]}catch{r=`Invalid CSS querySelector. [${t}]`}return r??`(JQL log) css querySelector [${t}], output ${n.collection.length} element(s)`},I=t=>{let e=i=>(...u)=>l(i,Function)&&i(I(t),...u),n=i=>(...u)=>l(i,Function)&&T(I(t),c=>i(c,...u)),o=i=>Lt[i]&&n(Lt[i])||ht[i]&&e(ht[i]),r={get:(i,u)=>o(u)??(l(+u,Number)?i.collection?.[u]:i[u])};return new Proxy(t,r)},Z=(()=>{let t=[...Array(26)].map((o,r)=>String.fromCharCode(r+65)).concat([...Array(26)].map((o,r)=>String.fromCharCode(r+97))).concat([...Array(10)].map((o,r)=>`${r}`)),e=o=>o&&t.filter(r=>!~o.indexOf(r))||t,n=(o=12,r=[])=>{let i=e(r);return[...Array(o)].map(()=>i[Math.floor(Math.random()*i.length)]).join("")};return{random:n,randomHtmlElementId:(o=12,r=[])=>{let i=e(r.concat("0123456789".split("")));return i[Math.floor(Math.random()*i.length)].concat(n(o-1,r))}}})();var T=(t,e)=>{let n=t.collection.filter(o=>!yt(o));for(let o=0;o<n.length;o+=1)e(n[o],o);return t},B=(t=[],e=document.body,n=S.BeforeEnd)=>t.reduce((o,r)=>{let i=N(r)&&_(r,e,n);return i?[...o,i]:o},[]),it=t=>{let e=t.first().dataset.hid||Z.random(8);return t.setData({hid:e}),`[data-hid="${e}"]`},O=function(t){if(!t)return!1;let e=t.style,n=getComputedStyle(t),o=[e.visibility,n.visibility].includes("hidden"),r=[e.display,n.display].includes("none"),i=t.offsetTop<0||t.offsetLeft+t.offsetWidth<0||t.offsetLeft>document.body.offsetWidth,u=+n.opacity==0||+(e.opacity||1)==0;return!(i||u||r||o)};var j=(t,e=120)=>t.trim().slice(0,e).replace(/>\s+</g,"><").replace(/</g,"&lt;").replace(/\s{2,}/g," ").replace(/\n/g,"\\n")+(t.length>e?"&hellip;":"").trim(),P=(t,e=120)=>j(t,e).replace(/&lt;/g,"<").replace(/&hellip;/g,"..."),mt=()=>(t=>`[${V(t.getHours())}:${V(t.getMinutes())}:${V(t.getSeconds())}.${V(t.getMilliseconds(),3)}]`)(new Date),Qt=t=>(t=(t.trim().startsWith("#")?t.slice(1):t).trim(),t.length===3?[...t].map(e=>e+e).join(""):t),st=function(t,e=100){t=Qt(t.slice(1));let n=e%100!==0;return`rgb${n?"a":""}(${parseInt(t.slice(0,2),16)}, ${parseInt(t.slice(2,4),16)}, ${parseInt(t.slice(-2),16)}${n?`, ${e/100}`:""})`},Ct=t=>{let e=c=>t(c,document.createElement("br")),n=X({createWithId:"JQLStylesheet"}),o=c=>X({createWithId:c}),r=pt(t),i=(c,m,...p)=>l(m,Function)?(p.push(m),r(null,c,null,...p)):r(null,c,m,...p);return Object.entries({setStyle:n,createStyle:o,virtual:e,debugLog:ct,log:w,handle:r,setSystemLogActiveState:ut,insertPositions:S,popup:()=>gt(t),text:(c,m=!1)=>m?document.createComment(c):document.createTextNode(c),node:(c,m=document.body)=>document.querySelector(c,m),nodes:(c,m=document.body)=>document.querySelectorAll(c,m),delegate:(c,m,...p)=>l(m,Function)?(p.push(m),r(null,c,null,...p)):r(null,c,m,...p)}).forEach(([c,m])=>t[c]=m),t};var b=Ct(Wt());function Wt(){return function(e,n=document.body,o=S.BeforeEnd){let r=K(e),i=Et(e),u=!l(n,HTMLBRElement)&&i||r,c={collection:bt(e)??[],isVirtual:l(n,HTMLBRElement),isJQL:!0,insertPositions:S},m=k(c.collection),p=`(JQL log) raw input: [${j(i?e.join(""):m?`Element(s): ${c.collection.map(y=>y.outerHTML||y.textContent).join("")}`:e,80)}]`;if(c.collection.length&&m)return Q(p),I(c);if(u&&[e].flat().forEach(y=>c.collection.push(v(y))),u&&c.collection.length>0){let y=c.collection.filter(E=>E.dataset?.jqlcreationerror);return c.collection=c.collection.filter(E=>!E.dataset?.jqlcreationerror),Q(`${p}
  Created ${c.isVirtual?" VIRTUAL":""} (outerHTML truncated) [${j(St(c.collection)||"sanitized: no elements remaining",80)}]`),y.length&&console.error(`JQL: illegal html, not rendered: "${y.reduce((E,x)=>E.concat(`${x.textContent}
`),"").trim()}"`),c.isVirtual||B(c.collection,n,o),I(c)}let $=vt(e,n,c);return Q($),I(c)}}export{b as default};
//# sourceMappingURL=jql.min.js.map
