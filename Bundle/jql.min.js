var Mt=await fetch("../src/Resource/defaultTagPermissions.json").then(t=>t.json()),D={isAllowed(t){let e=t?.nodeName.toLowerCase()||"none";return!!Mt[e]},setTagPermission(t,e=!1){t=t.toLowerCase(),rawTags[t]&&(rawTags[t]=e)}};var et=await fetch("../src/Resource/attributeStore.json").then(t=>t.json()),Tt=!1;var W={data:/data-[\-\w.\p{L}]/ui,validURL:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,whiteSpace:/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,notAllowedValues:/javascript|injected|noreferrer|alert|DataURL/gi},Ht=t=>{if(Tt&&Object.keys(t.removed).length){let e=Object.entries(t.removed).reduce((n,[o,r])=>[...n,`${o} => ${r}`],[]).join("\\000A");console.info("JQL HTML creation errors:"),console.info(e)}},nt=t=>{let e=document.createElement("template"),n={rawHTML:t.outerHTML,removed:{}};e.innerHTML=`<div id="placeholder">${t.outerHTML}</div>`;let o=e.content.querySelector("#placeholder");return o.querySelectorAll("*").forEach(r=>{let i=l(r,SVGElement)?et.svg:et.html;[...r.attributes].forEach(a=>{let g=a.name.trim().toLowerCase(),p=a.value.trim().toLowerCase().replace(W.whiteSpace,""),$=g==="href"?!W.validURL.test(p):W.notAllowedValues.test(p),y=g.startsWith("data")?!W.data.test(g):!!i[g];($||y)&&(n.removed[`${a.name}`]=`attribute/property (-value) not allowed, remove (value: ${P(a.value||"none",60)})`,r.removeAttribute(a.name))}),D.isAllowed(r)||(n.removed[`<${r.nodeName.toLowerCase()}>`]=`not allowed, not rendered (tag: ${P(r.outerHTML,60)})`,r.remove())}),Ht(n),o.children[0]};var At=D.setTagPermission;var S={BeforeBegin:"beforebegin",AfterBegin:"afterbegin",BeforeEnd:"beforeend",AfterEnd:"afterend"},U=document.createElement("div"),wt=t=>(U.innerHTML=t.trim(),U.childNodes.length?nt(U):void 0),_=(t,e=document.body,n=S.BeforeEnd)=>{if(e=e.isJQL?e.first():e,t){if(l(t,HTMLElement))return e.insertAdjacentElement(n,t);l(t,Comment,Text)&&(n===S.BeforeEnd&&e.appendChild(t),n===S.AfterBegin&&e.insertBefore(t,e.firstElementChild))}},v=t=>{if(t=t.trim(),t.startsWith("<!--")&&t.endsWith("-->"))return document.createComment(t.replace(/<!--|-->$/g,""));let e=wt(t);return e.children.length?e.children[0]:v(`<span data-jqlcreationerror="1">${N(t,60)}</span>`)};var ot=t=>t&&(t.textContent=""),z=(t,e)=>t.toLowerCase().trim()===e,G=(t,e)=>{t&&l(e,Object)&&Object.entries(e).forEach(([n,o])=>t.dataset[n]=o)},rt=(t,e,n)=>{let{setStyle:o}=b;n&&l(e,String)&&(e={[e]:n==="-"?"":n});let r;e.className&&(r=e.className,delete e.className),r=[...t.classList].find(u=>u.startsWith("JQLCreated")||r&&u===r)||r||`JQLCreated_${Y.randomHtmlElementId(12)}`,o(`.${r}`,e),t.classList.add(r)},it=(t,e)=>{t&&Object.entries(e).forEach(([n,o])=>{n.startsWith("data")&&G(t,{[n]:o}),z(n,"class")&&o.split(/\s+/).forEach(r=>t.classList.add(`${r}`)),l(o,String)&&(t[n]=o)})},Rt={straigthLoops:{toggleClass:(t,e)=>t.classList.toggle(e),toggleStyleFragments:(t,e)=>t&&Object.entries(e).forEach(([n,o])=>{l(o,Function)&&(o=o(t)),/color/i.test(n)&&(o=o.startsWith("#")?ct(o):o.replace(/(,|,\s{2,})(\w)/g,(...r)=>`, ${r[2]}`)),t.style[n]=`${t.style[n]}`==`${o}`?"":o}),removeAttr:(t,e)=>t&&t.removeAttribute(e),toggleAttr:(t,e,n)=>t&&t.hasAttribute(e)?t.removeAttribute(e):t.setAttribute(e,n),empty:ot,clear:ot,replaceClass:(t,e,...n)=>{t.classList.remove(e),n.forEach(o=>t.classList.add(o))},removeClass:(t,...e)=>e.forEach(n=>t.classList.remove(n)),addClass:(t,...e)=>t&&e.forEach(n=>t.classList.add(n)),show:t=>t.style.display="",hide:t=>t.style.display="none",setData:G,assignAttrValues:it,attr(t,e,n){if(!t)return!0;if(n!==void 0&&(e={[e]:n}),!n&&l(e,String))return t.getAttribute(e);Object.entries(e).forEach(([o,r])=>z(o,"style")?rt(t,r,void 0):z(o,"data")?G(t,r):l(r,Object)?it(t,r):t.setAttribute(o,r))},style:(t,e,n)=>{n&&l(e,String)&&(e={[e]:n||"none"}),l(e,Object)&&Object.entries(e).forEach(([o,r])=>t.style[o]=r)},css:rt},instanceExtensions:{text:(t,e,n)=>{if(t.isEmpty())return t;let o=r=>r.textContent=n?r.textContent+e:e;return e?T(t,o):t.first().textContent},each:(t,e)=>T(t,e),remove:(t,e)=>{let n=o=>o.remove();if(e){let o=t.find$(e);!o.isEmpty()&&T(o,n);return}T(t,n)},computedStyle:(t,e)=>t.first()&&getComputedStyle(t.first())[e],getData:(t,e,n)=>t.first()&&t.first().dataset&&t.first().dataset[e]||n,isEmpty:t=>t.collection.length<1,is:(t,e)=>{let n=t.first();if(!n)return!0;switch(e){case":visible":return O(n);case":hidden":return!O(n);case":disabled":return n.getAttribute("readonly")||n.getAttribute("disabled");default:return!0}},hasClass:(t,...e)=>{let n=t.first();return t.isEmpty()||!n.classList.length?!1:e.find(o=>n.classList.contains(o))||!1},replace:(t,e,n)=>{let o=t.first();return n.isJQL&&(n=n.first()),o&&e&&(e=l(e,String)?o.querySelector(e):e.isJQL?e.first():e,e&&n&&e.replaceWith(n)),t},replaceMe:(t,e)=>(e=l(e,HTMLElement)?b(e):e,t.parent().replace(t,e),e),val:(t,e)=>{let n=t.first();return!n||!l(n,HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement)?t:e===void 0?n.value:(n.value=`${e}`.length<1?"":e,t)},parent:t=>t.collection.length&&t.first().parentNode&&b(t.first().parentNode)||t,append:(t,...e)=>{if(t.collection.length&&e.length)for(let n=0;n<e.length;n+=1){let o=e[n];if(l(o,String))return t.collection.forEach(r=>r.appendChild(v(o))),t;if(j(e[n]))return t.collection.forEach(r=>r.appendChild(is(o,Comment)?o:o.cloneNode(!0))),t;if(e[n].isJQL&&e[n].collection.length){e[n].isVirtual&&o.toDOM();let r=o.collection;o.remove(),r.forEach(i=>t.collection.forEach(u=>u.appendChild(l(i,Comment)?i:i.cloneNode(!0))))}}return t},prepend:(t,...e)=>{if(!t.isEmpty()&&e)for(let n=0;n<e.length;n+=1){let o=e[n];if(l(o,String))return t.collection.forEach(r=>r.insertBefore(v(o),r.firstChild)),t;if(j(o))return t.collection.forEach(r=>r.insertBefore(l(o,Comment)?o:o.cloneNode(!0),r.firstChild)),t;if(o.isJQL&&!o.isEmpty()){let r=o.collection.slice();o.remove(),r.forEach(i=>t.collection.forEach(u=>u&&u.insertBefore(l(i,Comment)?i:i.cloneNode(!0),u.firstChild)))}}return t},appendTo:(t,e)=>(e.isJQL||(e=t.virtual(e)),e.append(t)),prependTo:(t,e)=>(e.isJQL||(e=t.virtual(e)),e.prepend(t)),single:(t,e="0")=>t.collection.length>0?isNaN(+e)&&t.find(e)?t.find$(e):+e<t.collection.length?b(t.collection[e]):b(t.collection.slice(-1)):t,toNodeList:t=>{let e=document.createElement("div");for(let n of t.collection){let o=document.importNode(n,!0);o.removeAttribute("id"),e.append(o)}return e.childNodes},duplicate:(t,e=!1)=>{let n=t.toNodeList();return e?b(n):t.virtual(n)},toDOM:(t,e=document.body,n=S.BeforeEnd)=>(t.isVirtual&&(t.isVirtual=!1,B(t.collection,e,n)),t),first:(t,e=!1)=>{if(t.collection.length>0)return e?t.single():t.collection[0]},first$:(t,e)=>t.single(e),find:(t,e)=>t.first()?.querySelectorAll(e)||[],find$:(t,e)=>{let n=t.collection.reduce((o,r)=>[...o,[...r.querySelectorAll(e)]],[]).flat().filter(o=>l(o,HTMLElement));return n.length&&b(n[0])||b()},prop:(t,e,n)=>n?t.collection.length?T(t,o=>o[e]=n):t:t.collection.length?t.first()[e]:t,on:(t,e,n)=>{if(t.collection.length){let o=st(t);b.handle(t,e,o,n)}return t},html:(t,e,n)=>{if(e===void 0)return t.first()?.innerHTML;if(!t.isEmpty()){let o=e.isJQL?e.first():v(`<div>${e}</div>`);if(!l(o,Comment))return T(t,i=>i.innerHTML=n?i.innerHTML+o.innerHTML:o.innerHTML)}return t},outerHtml:t=>(t.first()||{outerHTML:void 0}).outerHTML,htmlFor:(t,e,n="",o=!1)=>{if(e&&t.collection.length){let r=t.find$(e);if(!r)return t;if("{htmlValue}".trim().length<1)return r.textContent="",t;let i=v(`<div>${n}</div>`);i&&r.html(i.innerHTML,o)}return t},dimensions:t=>t.first()?.getBoundingClientRect(),delegate:(t,e,n,...o)=>(o.forEach(r=>b.handle(t,e,n,r)),t),ON:(t,e,...n)=>(t.collection.length&&n.forEach(o=>t.on(e,o)),t),trigger:(t,e,n=Event,o={})=>{if(t.collection.length){let r=new n(e,{...o,bubbles:o.bubbles??!0});for(let i of t.collection)i.dispatchEvent(r)}return t}}},Z=Rt;var X=await fetch("../src/Resource/defaultLogStyling.txt").then(t=>t.text()).then(t=>t.split("~RULE~")),at={get isOn(){return F},isVisible:()=>O(M()),on(){F=!0,q||(M()||ut())?.parentNode.classList.add("visible"),w(`Logging started (to ${q?"console":"document"})`)},off(){M()&&(w("Logging stopped"),M()?.parentNode.classList.remove("visible")),F=!1},toConsole(t=!1){q=t,F=t,t&&document.querySelector("#logBox")?.remove()},remove:()=>{F=!1,document.querySelector("#logBox").remove()},hide:()=>M()?.parentNode.classList.remove("visible"),show:()=>M()?.parentNode.classList.add("visible"),reversed(t=!0){dt=t,w(`Reverse logging reset: now logging ${t?"bottom to top (latest first)":"top to bottom (latest last)"}`)},clear(){let t=M();t&&(t.textContent=""),w("Cleared")}},lt=!1,F=!1,q=!1,dt=!0,M=()=>document.querySelector("#jql_logger"),Nt=!0,ut=()=>{X&&Ft(b.createStyle("JQLLogCSS"));let t=Nt?"div":"pre",e=`<div id="logBox"><div class="legend"><div></div></div><${t} id="jql_logger"></${t}></div>`;return _(v(e),void 0,S.AfterBegin),document.querySelector("#jql_logger")},jt=t=>l(t,String)&&Object.assign(document.createElement("textarea"),{innerHTML:t}).textContent||t,w=(...t)=>{if(!F)return;!q&&!M()&&ut();let e=n=>`${l(n,Object)?JSON.stringify(n,null,2):n}
`;t.forEach(n=>q?console.log(jt(n)):M().insertAdjacentHTML(dt?"afterbegin":"beforeend",`${ft()} ${e(n.replace(/\n/g,"<br>"))}`))},mt=t=>lt=t,Q=(...t)=>lt&&w(...t);function Ft(t){X?.forEach(e=>t(e)),X=void 0}var pt=It,gt=await fetch("../src/Resource/defaultPopupStyling.txt").then(t=>t.text()).then(t=>t.split("~RULE~"));function It(t){let e=t(document.body),n=t.createStyle("JQLPopupCSS");Jt(n);let o,r,i="ontouchstart"in document.documentElement?"touchend":"click";t.delegate(i,"#closer, .between",L);let u=()=>(C(),E.hasClass("active")&&E.removeClass("active"),E.addClass("active"),o=setTimeout(()=>E.removeClass("active"),2500),!0),a=(()=>{let s=!1;return{set isModal(d){s=d},get isModal(){return s},get isModalActive(){return s&&p.hasClass("active")&&u()}}})(),g=s=>{let d=t('<div class="popupContainer">').append(t('<span id="closer" class="closeHandleIcon"></span>').prop("title","Click here or anywhere outside the box to close")).append('<div class="popupBox"><div id="modalWarning"></div><div data-modalcontent></div></div>'),f=t("#closer"),A=t('<div class="between"></div>');return[d,A,f,t("#modalWarning")]},[p,$,y,E]=g(),x=()=>{t(".between").removeClass("active").style({top:0}),t("#closer, .popupContainer, #modalWarning").removeClass("active"),t("[data-modalcontent]").empty()},J=(s,d)=>{t(".between, .popupContainer").addClass("active"),p.style({height:"auto",width:"auto"}),$.style({top:`${scrollY}px`}),e.addClass("popupActive"),d&&d.addClass("active")},C=()=>o&&clearTimeout(o),H=(s,d,f)=>{if(a.isModal=d,r=f,!s.isJQL&&!l(s,String))return h(t('<b style="color:red">Popup not created: invalid input</b>'),2);C(),t(".popupBox > [data-modalcontent]").empty().append(s.isJQL?s:t(`<div>${s}</div>`)),J(p,a.isModal?void 0:y)},m=(s,d=!1,f=void 0)=>!a.isModalActive&&H(s,d,f),h=(s,d=2,f=null)=>{if(a.isModalActive)return;x(),m(s,!1,f),o=setTimeout(f?()=>L(f):L,d*1e3)};function L(s){if(C(),a.isModalActive)return;let d=l(s,Function)?s:r;if(l(d,Function))return r=void 0,d();x();let f=parseFloat(p.computedStyle("transitionDuration"))*1e3;o=setTimeout(()=>e.removeClass("popupActive"),f)}return{create:m,createTimed:h,remove:L,removeModal:s=>{a.isModal=!1,L(s)}}}function Jt(t){gt.forEach(e=>t(e)),gt=void 0}var R={},ht=t=>{let e=r=>R[r.type].forEach(i=>i(r)),n=(r,i)=>u=>{let a=u.target.closest(r);return a&&i(u,t(a))},o=r=>!Object.keys(R).find(i=>i===r)&&document.addEventListener(r,e);return(r,i,u,a)=>{o(i);let g=u?n(u,a):a;R=R[i]?{...R,[i]:R[i].concat(g)}:{...R,[i]:[g]}}};var K=Ot;function Ot({styleSheet:t,createWithId:e}){let{cssRuleFromText:n,checkAtRules:o,toDashedNotation:r,IS:i,shortenRule:u,consider:a,ruleExists:g,checkParams:p,atMedia2String:$,sheet:y}=qt({styleSheet:t,createWithId:e}),E=(m,h)=>Object.entries(h).forEach(([L,c])=>m.style.setProperty(r(L),c)),x=(m,h,L=y)=>{if(!i(m,String)||!m.trim().length||/[;,]$/g.test(m.trim()))return console.error(`StylingFactory instance (setRules): [${m||"[no selector given]"}] is not a valid selector`);let c=g(m,!0),s=c||L.cssRules[L.insertRule(`${m} {}`,L.cssRules.length||0)];return a(()=>E(s,h),m,c)},J=m=>{let h=m.trim().split(/{/,2),L=h.shift().trim();if(!i(L,String)||!L.trim())return console.error(`StylingFactory instance (doParse): no (valid) selector could be extracted from rule ${u(m)}`);let c=n(h);return x(L,c)},C=m=>{let h=o(m);return h.done?h.existing:J(m)},H=(m,h)=>m.trim().startsWith("@media")?C($(m,h)):x(m,h);return(m,h={})=>p(m,h)&&(Object.keys(h).length?H(m,h):C(m))}function qt({styleSheet:t,createWithId:e}){let n="Note: The rule or some of its properties may not be supported by your browser (yet)",o=c=>c.replace(/([*\[\]()-+{}.$?\\])/g,"\\$1");t=e?(c=>document.head.insertAdjacentElement("beforeend",Object.assign(document.createElement("style"),{id:c,type:"text/css"})).sheet)(e):t;let i=(c,...s)=>{let d=s.length&&Array.isArray(s.slice(-1))?s.pop().join(""):"";return new RegExp((s.length&&c.raw.reduce((f,A,xt)=>f.concat(s[xt-1]||"").concat(A),"")||c.raw.join("")).split(`
`).map(f=>f.replace(/\s|\/\/.*$/g,"").trim().replace(/(@s!)/g," ")).join(""),d)},u=(c,s)=>[...t.rules].find(d=>s?x(d.selectorText||"",c):i`${o(c)}${[..."gim"]}`.test(d.cssText)),a=c=>/@import|@charset|@font-face/i.test(c)?{existing:H(c,0),done:!0}:$.test(c)?{ok:H(c,t.cssRules.length),done:!0}:{ok:!1,done:!1},g=(c,...s)=>!!s.find(d=>p(c,d)),p=(c,...s)=>{if(s.length>1)return g(c,...s);s=s.shift();let d="Invalid parameter(s)",f=c===0?Number:c===""?String:c?Object.getPrototypeOf(c)?.constructor:{name:d};return s?s===f?.__proto__||s===f:f?.name??d},$=i`@keyframes | @font-feature-values | @font-palette-values 
    | @layer | @namespace | @page | @counter-style | @container | @media ${["i"]}`,y=c=>c[0].trim().replace(/[}{]/,"").split(`
`).map(s=>s.trim()).filter(s=>s).reduce((s,d)=>{let[f,A]=[d.slice(0,d.indexOf(":")).trim(),d.slice(d.indexOf(":")+1).trim().replace(/;$|;.+(?=\/*).+\/$/,"")];return f&&A?{...s,[f]:A}:s},{}),E=c=>c.replace(/[A-Z]/g,s=>`-${s.toLowerCase()}`).replace(/[^--]^-|-$/,""),x=(c,s)=>c?.replace("::",":")===s?.replace("::",":"),J=(c,s)=>c&&p(c,String)&&c.trim().length&&p(s,Object)||(console.error("StylingFactory instance called with invalid parameters"),!1),C=c=>{let s=(c||"NO RULE").trim().slice(0,50).replace(/\n/g,"\\n").replace(/\s{2,}/g," ");return c.length>s.length?`${s.trim()}...truncated`:s},H=c=>{c=c.trim();let s=!!u(c.slice(0,c.indexOf("{")));try{return t.insertRule(`${c}`,t.cssRules.length),s}catch(d){return console.error(`StylingFactory instance (tryParse) ${d.name} Error:
${d.message}
Rule: ${C(c)}
${n}`),s}},m=(c,s,d)=>{try{return c(),d}catch(f){return console.error(`StylingFactory instance (tryAddOrModify) ${f.name} Error:
${f.message}
Rule: ${C(s)}
${n}`),d}},h=c=>Object.entries(c).map(([s,d])=>`${s}: ${d.trim()}`).join(`;
`);return{sheet:t,cssRuleFromText:y,checkAtRules:a,ruleExists:u,atMedia2String:(c,s)=>`${c.trim()} ${Object.entries(s).map(([d,f])=>`${d}: { ${h(f)}`)}`,toDashedNotation:E,checkParams:J,tryParse:H,consider:m,IS:p,shortenRule:C}}var Lt=Z.instanceExtensions,yt=Z.straigthLoops,V=(t,e=2)=>`${t}`.padStart(e,"0"),Qt=(t,...e)=>!!e.find(n=>l(t,n)),l=(t,...e)=>{if(e.length>1)return Qt(t,...e);e=e.shift();let n="Invalid parameter(s)",o=t===0?Number:t===""?String:t?Object.getPrototypeOf(t)?.constructor:{name:n};return e?e===o?.__proto__||e===o:o?.name??n},Et=t=>l(t,Comment,Text),j=t=>l(t,Text,HTMLElement,Comment),k=t=>l(t,String)&&/^<|>$/.test(`${t}`.trim()),St=t=>l(t,Array)&&!t?.find(e=>!k(e)),tt=t=>l(t,Array)&&!t?.find(e=>!j(e)),bt=t=>t?.filter(e=>e).reduce((e,n)=>e.concat(Et(n)?n.textContent:n.outerHTML),""),vt=t=>t?l(t,NodeList)?[...t]:j(t)?[t]:tt(t)?t:t.isJQL?t.collection:void 0:[],Ct=(t,e,n)=>{let o=e!==document.body&&l(t,String)&&t.toLowerCase()!=="body"?e:document,r;try{n.collection=[...o.querySelectorAll(t)]}catch{r=`Invalid CSS querySelector. [${t}]`}return r??`(JQL log) css querySelector [${t}], output ${n.collection.length} element(s)`},I=t=>{let e=i=>(...u)=>l(i,Function)&&i(I(t),...u),n=i=>(...u)=>l(i,Function)&&T(I(t),a=>i(a,...u)),o=i=>yt[i]&&n(yt[i])||Lt[i]&&e(Lt[i]),r={get:(i,u)=>o(u)??(l(+u,Number)?i.collection?.[u]:i[u])};return new Proxy(t,r)},Y=(()=>{let t=[...Array(26)].map((o,r)=>String.fromCharCode(r+65)).concat([...Array(26)].map((o,r)=>String.fromCharCode(r+97))).concat([...Array(10)].map((o,r)=>`${r}`)),e=o=>o&&t.filter(r=>!~o.indexOf(r))||t,n=(o=12,r=[])=>{let i=e(r);return[...Array(o)].map(()=>i[Math.floor(Math.random()*i.length)]).join("")};return{random:n,randomHtmlElementId:(o=12,r=[])=>{let i=e(r.concat("0123456789".split("")));return i[Math.floor(Math.random()*i.length)].concat(n(o-1,r))}}})();var T=(t,e)=>{let n=t.collection.filter(o=>!Et(o));for(let o=0;o<n.length;o+=1)e(n[o],o);return t},B=(t=[],e=document.body,n=S.BeforeEnd)=>t.reduce((o,r)=>{let i=j(r)&&_(r,e,n);return i?[...o,i]:o},[]),st=t=>{let e=t.first().dataset.hid||Y.random(8);return t.setData({hid:e}),`[data-hid="${e}"]`},O=function(t){if(!t)return!1;let e=t.style,n=getComputedStyle(t),o=[e.visibility,n.visibility].includes("hidden"),r=[e.display,n.display].includes("none"),i=t.offsetTop<0||t.offsetLeft+t.offsetWidth<0||t.offsetLeft>document.body.offsetWidth,u=+n.opacity==0||+(e.opacity||1)==0;return!(i||u||r||o)};var N=(t,e=120)=>t.trim().slice(0,e).replace(/>\s+</g,"><").replace(/</g,"&lt;").replace(/\s{2,}/g," ").replace(/\n/g,"\\n")+(t.length>e?"&hellip;":"").trim(),P=(t,e=120)=>N(t,e).replace(/&lt;/g,"<").replace(/&hellip;/g,"..."),ft=()=>(t=>`[${V(t.getHours())}:${V(t.getMinutes())}:${V(t.getSeconds())}.${V(t.getMilliseconds(),3)}]`)(new Date),Wt=t=>(t=(t.trim().startsWith("#")?t.slice(1):t).trim(),t.length===3?[...t].map(e=>e+e).join(""):t),ct=function(t,e=100){t=Wt(t.slice(1));let n=e%100!==0;return`rgb${n?"a":""}(${parseInt(t.slice(0,2),16)}, ${parseInt(t.slice(2,4),16)}, ${parseInt(t.slice(-2),16)}${n?`, ${e/100}`:""})`},_t={debugLog:at,log:w,setSystemLogActiveState:mt,insertPositions:S,text:(t,e=!1)=>e?document.createComment(t):document.createTextNode(t),node:(t,e=document.body)=>document.querySelector(t,e),nodes:(t,e=document.body)=>document.querySelectorAll(t,e)},$t=t=>{let e=a=>t(a,document.createElement("br")),n=K({createWithId:"JQLStylesheet"}),o=a=>K({createWithId:a}),r=ht(t),i=(a,g,...p)=>l(g,Function)?(p.push(g),r(null,a,null,...p)):r(null,a,g,...p),u={..._t,setStyle:n,createStyle:o,virtual:e,handle:r,popup:()=>pt(t),delegate:(a,g,...p)=>l(g,Function)?(p.push(g),r(null,a,null,...p)):r(null,a,g,...p)};return Object.entries(u).forEach(([a,g])=>t[a]=g),t};var b=$t(Bt());function Bt(){return function(e,n=document.body,o=S.BeforeEnd){let r=k(e),i=St(e),u=!l(n,HTMLBRElement)&&i||r,a={collection:vt(e)??[],isVirtual:l(n,HTMLBRElement),isJQL:!0,insertPositions:S},g=tt(a.collection),p=`(JQL log) raw input: [${N(i?e.join(""):g?`Element(s): ${a.collection.map(y=>y.outerHTML||y.textContent).join("")}`:e,80)}]`;if(a.collection.length&&g)return Q(p),I(a);if(u&&[e].flat().forEach(y=>a.collection.push(v(y))),u&&a.collection.length>0){let y=a.collection.filter(E=>E.dataset?.jqlcreationerror);return a.collection=a.collection.filter(E=>!E.dataset?.jqlcreationerror),Q(`${p}
  Created ${a.isVirtual?" VIRTUAL":""} (outerHTML truncated) [${N(bt(a.collection)||"sanitized: no elements remaining",80)}]`),y.length&&console.error(`JQL: illegal html, not rendered: "${y.reduce((E,x)=>E.concat(`${x.textContent}
`),"").trim()}"`),a.isVirtual||B(a.collection,n,o),I(a)}let $=Ct(e,n,a);return Q($),I(a)}}export{b as default};
//# sourceMappingURL=jql.min.js.map
